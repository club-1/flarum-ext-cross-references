{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@club-1/flarum-ext-cross-references/./src/forum/cache.ts","webpack://@club-1/flarum-ext-cross-references/./src/forum/components/DiscussionId.tsx","webpack://@club-1/flarum-ext-cross-references/./src/forum/components/DiscussionLink.tsx","webpack://@club-1/flarum-ext-cross-references/./src/forum/components/DiscussionReferencedPost.tsx","webpack://@club-1/flarum-ext-cross-references/./src/forum/index.ts","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['common/Component']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['common/components/Link']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['common/extend']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['forum/app']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['forum/components/DiscussionHero']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['forum/components/EventPost']\"","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/regenerator/index.js","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@club-1/flarum-ext-cross-references/webpack/bootstrap","webpack://@club-1/flarum-ext-cross-references/webpack/runtime/compat get default export","webpack://@club-1/flarum-ext-cross-references/webpack/runtime/define property getters","webpack://@club-1/flarum-ext-cross-references/webpack/runtime/hasOwnProperty shorthand","webpack://@club-1/flarum-ext-cross-references/webpack/runtime/make namespace object"],"sourcesContent":["/*\n * This file is part of club-1/flarum-ext-cross-references.\n *\n * Copyright (c) 2023 Nicolas Peugnet <nicolas@club1.fr>.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n *\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport Model from 'flarum/common/Model';\nimport Discussion from 'flarum/common/models/Discussion';\nimport app from 'flarum/forum/app';\n\nexport interface Cache<T> {\n  get(key: string): T | undefined\n  set(key: string, value: T): this\n}\n\ntype FIFOCacheEntry = {key: string, next?: FIFOCacheEntry};\n\nexport class FIFOCache<T> implements Cache<T> {\n  protected head?: FIFOCacheEntry;\n  protected tail?: FIFOCacheEntry;\n  protected data: Map<string, T> = new Map();\n  protected capacity: number;\n\n  constructor(capacity: number) {\n    this.capacity = capacity;\n  }\n\n  get(key: string): T | undefined {\n    return this.data.get(key);\n  }\n\n  set(key: string, value: T): this {\n    if (this.data.size == this.capacity) {\n      const evicted = this.head!;\n      this.data.delete(evicted.key);\n      this.head = evicted.next;\n    }\n    const entry: FIFOCacheEntry = {key}\n    if (!this.head) {\n      this.head = entry;\n    }\n    if (!this.tail) {\n      this.tail = entry;\n    } else {\n      this.tail.next = entry;\n      this.tail = entry;\n    }\n    this.data.set(key, value);\n    return this;\n  }\n}\n\nfunction getKey(name: string, id: string): string {\n  return name + id;\n}\n\nconst ModelMap: {[name: string]: string} = {}\nModelMap[Discussion.name] = 'discussions';\n\n\n/** Empty function used to disable callbacks */\nfunction noop() {};\n\nexport abstract class ResponseCache {\n  private static responseErrors: Cache<boolean> = new FIFOCache(128);\n  private static inFlight: Map<string, Promise<Model | null>> = new Map();\n\n  public static async find<T extends Model>(m: new () => T, id: string, options = {}): Promise<T | null> {\n    const key = getKey(m.name, id);\n\n    if (this.responseErrors.get(key) == true) {\n      return null;\n    }\n    const inFlight = this.inFlight.get(key);\n    if (inFlight) {\n      return inFlight as Promise<T | null>;\n    } else {\n      const req = app.store.find<T>(ModelMap[m.name], id, options, {errorHandler: noop})\n        .catch(() => {\n          this.responseErrors.set(key, true);\n          return null;\n        })\n        .finally(() => this.inFlight.delete(key));\n      this.inFlight.set(key, req);\n      return req;\n    }\n  }\n}\n","/*\n * This file is part of club-1/flarum-ext-cross-references.\n *\n * Copyright (c) 2022 Nicolas Peugnet <nicolas@club1.fr>.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n *\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport Component from \"flarum/common/Component\";\nimport {ComponentAttrs} from \"flarum/common/Component\";\n\ntype DiscussionIdAttrs = ComponentAttrs & {discussionId: string}\n\nexport default class DiscussionId extends Component<DiscussionIdAttrs> {\n  view() {\n    return <span class=\"DiscussionId\">#{this.attrs.discussionId}</span>\n  }\n}\n","/*\n * This file is part of club-1/flarum-ext-cross-references.\n *\n * Copyright (c) 2022 Nicolas Peugnet <nicolas@club1.fr>.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n *\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport app from 'flarum/forum/app';\nimport Link from 'flarum/common/components/Link';\nimport Component from 'flarum/common/Component';\nimport {ComponentAttrs} from \"flarum/common/Component\";\nimport DiscussionId from './DiscussionId';\n\nexport interface IDiscussion {\n  id(): string|undefined\n  title(): string\n}\n\ntype DiscussionLinkAttrs = ComponentAttrs & {\n  discussion: IDiscussion,\n  href?: string,\n}\n\nexport default class DiscussionLink extends Link {\n  attrs!: DiscussionLinkAttrs;\n\n  view() {\n    const discussion = this.attrs.discussion;\n    const href = this.attrs.href;\n    const showId = app.forum.attribute('showDiscussionId');\n    const isComment = href && /\\/d\\/[^\\/]+\\/[0-9]+/.test(href);\n    return (\n      <Link\n        href={href ? href : app.route('discussion', {id: discussion.id()})}\n        class=\"DiscussionLink\"\n      >\n        {\n          discussion.title()\n        } {\n          showId && <DiscussionId discussionId={discussion.id()} />\n        } {\n          isComment && <DiscussionComment/>\n        }\n      </Link>\n    );\n  }\n}\n\nclass DiscussionComment extends Component {\n  view() {\n    return <span class=\"DiscussionComment\">\n      ({app.translator.trans('club-1-cross-references.forum.comment')})\n    </span>\n  }\n}\n","/*\n * This file is part of club-1/flarum-ext-cross-references.\n *\n * Copyright (c) 2022 Nicolas Peugnet <nicolas@club1.fr>.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n *\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport Discussion from 'flarum/common/models/Discussion';\nimport app from 'flarum/forum/app';\nimport EventPost from 'flarum/forum/components/EventPost';\nimport { IPostAttrs } from 'flarum/forum/components/Post';\nimport DiscussionLink, { IDiscussion } from './DiscussionLink';\n\ntype DiscussionReferencedPostAttrs = IPostAttrs & {source: IDiscussion};\n\nfunction dummyDiscussion(id: string) {\n  return {\n    id: () => id,\n    title: () => app.translator.trans('club-1-cross-references.forum.unknown_discussion').toString(),\n  }\n}\n\nexport default class DiscussionReferencedPost extends EventPost {\n  attrs!: DiscussionReferencedPostAttrs\n\n  static initAttrs(attrs: DiscussionReferencedPostAttrs) {\n    super.initAttrs(attrs);\n\n    const sourceId = attrs.post.content()![0];\n    const source = app.store.getById<Discussion>('discussions', sourceId);\n    attrs.source = source || dummyDiscussion(sourceId);\n  }\n  icon() {\n    return 'fas fa-reply';\n  }\n\n  descriptionKey() {\n    return 'club-1-cross-references.forum.post_stream.discussion_referenced_text';\n  }\n\n  descriptionData() {\n    return {\n      source: <DiscussionLink discussion={this.attrs.source} />\n    }\n  }\n}\n","/*\n * This file is part of club-1/flarum-ext-cross-references.\n *\n * Copyright (c) 2022 Nicolas Peugnet <nicolas@club1.fr>.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n *\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { ComponentAttrs } from 'flarum/common/Component';\nimport { extend } from 'flarum/common/extend';\nimport Discussion from 'flarum/common/models/Discussion';\nimport app from 'flarum/forum/app';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport DiscussionHero from 'flarum/forum/components/DiscussionHero';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport { ResponseCache } from './cache';\nimport DiscussionId from './components/DiscussionId';\nimport DiscussionLink from './components/DiscussionLink';\nimport DiscussionReferencedPost from './components/DiscussionReferencedPost';\n\napp.initializers.add('club-1-cross-references', function(app) {\n  app.postComponents.discussionReferenced = DiscussionReferencedPost;\n  addSourceLinkReplacement();\n\n  addDiscussionTitleId();\n  addDiscussionListId();\n});\n\n/**\n * Extend CommentPost to replace plain links to discussions into\n * formated ones using its title as the text.\n */\nfunction addSourceLinkReplacement() {\n  function replaceSourceLinks(this: CommentPost) {\n    this.$('.Post-body a').replaceWith(function() {\n      const a = this as HTMLAnchorElement;\n      if (a.protocol !== document.location.protocol || a.host !== document.location.host) {\n        return a;\n      }\n      const match = a.pathname.match(/\\/d\\/([0-9]+)/);\n      if (match == null) {\n        return a;\n      }\n      if (a.text === a.href) {\n        const discussionId = match[1];\n        const discussion = app.store.getById('discussions', discussionId);\n        const span = document.createElement('span');\n        m.render(span, m(DiscussionLink, {discussion, href: a.href}));\n        return span;\n      } else {\n        a.addEventListener('click', (e) => {\n          m.route.set(this.getAttribute('href'))\n          e.preventDefault();\n        });\n        return a;\n      }\n    });\n  }\n  extend(CommentPost.prototype, 'oncreate', replaceSourceLinks);\n  extend(CommentPost.prototype, 'onupdate', replaceSourceLinks);\n}\n\n/**\n * Extend DiscussionHero to add its ID in the title item.\n */\nfunction addDiscussionTitleId() {\n  extend(DiscussionHero.prototype, 'items', function(items) {\n    if (!app.forum.attribute('showDiscussionId')) {\n      return;\n    }\n    const attrs = this.attrs as ComponentAttrs & {discussion: Discussion}\n    const discussionId = attrs.discussion.id()\n    const title = items.get('title');\n    items.setContent('title', m('h2', [\n      title.text,\n      ' ',\n      m(DiscussionId, {discussionId}),\n    ]));\n  });\n}\n\n/**\n * Extend DiscussionListItem to add its ID as an item with a high priority.\n */\nfunction addDiscussionListId() {\n  extend(DiscussionListItem.prototype, 'infoItems', function(items) {\n    if (!app.forum.attribute('showDiscussionId')) {\n      return;\n    }\n    const attrs = this.attrs as ComponentAttrs & {discussion: Discussion}\n    const discussionId = attrs.discussion.id();\n    items.add('id', m(DiscussionId, {discussionId}), 90);\n  });\n}\n\n/**\n * Extremely dirty hack to trigger a refresh of the composer preview\n * by inserting a ZeroWidthSpace at the beginning of the message and\n * then removing it 50ms later after the render pass.\n *\n * TODO: Replace this workaround once this issue is fixed:\n * <https://github.com/flarum/framework/issues/3720>\n */\nfunction refreshComposerPreview() {\n  const content = app.composer.fields?.content;\n  if (content) {\n    content('​' + content());\n    setTimeout(() => content(content().slice(1)), 50);\n  }\n}\n\nexport function filterCrossReferences(tag: any): false | void {\n  const id = tag.getAttribute('id');\n  const res = app.store.getById('discussions', id);\n  if (res) {\n    const discussion = res as Discussion;\n    tag.setAttribute('title', discussion.title());\n  } else {\n    ResponseCache.find(Discussion, id).then((d) => {\n      if (d) refreshComposerPreview();\n    });\n    return false;\n  }\n  tag.setAttribute('comment', app.translator.trans('club-1-cross-references.forum.comment'));\n}\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/models/Discussion'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/CommentPost'];","module.exports = flarum.core.compat['forum/components/DiscussionHero'];","module.exports = flarum.core.compat['forum/components/DiscussionListItem'];","module.exports = flarum.core.compat['forum/components/EventPost'];","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) {\n              if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            }\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["Discussion","app","FIFOCache","capacity","head","tail","data","Map","get","key","set","value","size","evicted","next","entry","getKey","name","id","ModelMap","noop","ResponseCache","find","m","options","responseErrors","inFlight","req","store","errorHandler","Component","DiscussionId","view","attrs","discussionId","Link","DiscussionLink","discussion","href","showId","forum","attribute","isComment","test","route","title","DiscussionComment","translator","trans","EventPost","dummyDiscussion","toString","DiscussionReferencedPost","initAttrs","sourceId","post","content","source","getById","icon","descriptionKey","descriptionData","extend","CommentPost","DiscussionHero","DiscussionListItem","initializers","add","postComponents","discussionReferenced","addSourceLinkReplacement","addDiscussionTitleId","addDiscussionListId","replaceSourceLinks","$","replaceWith","a","protocol","document","location","host","match","pathname","text","span","createElement","render","addEventListener","e","getAttribute","preventDefault","prototype","items","setContent","refreshComposerPreview","composer","fields","setTimeout","slice","filterCrossReferences","tag","res","setAttribute","then","d","_typeof","require","_regeneratorRuntime","module","exports","__esModule","Op","Object","hasOwn","hasOwnProperty","defineProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","TypeError","info","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","_catch","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","_inheritsLoose","subClass","superClass","_setPrototypeOf","o","p","bind"],"sourceRoot":""}