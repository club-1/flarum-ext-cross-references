{"version":3,"file":"forum.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGyD;AACtB;AAS5B,IAAME,SAAS;EAMpB,mBAAYC,QAAgB,EAAE;IAAA,KALpBC,IAAI;IAAA,KACJC,IAAI;IAAA,KACJC,IAAI,GAAmB,IAAIC,GAAG,EAAE;IAAA,KAChCJ,QAAQ;IAGhB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;EAC1B;EAAC;EAAA,OAEDK,GAAG,GAAH,aAAIC,GAAW,EAAiB;IAC9B,OAAO,IAAI,CAACH,IAAI,CAACE,GAAG,CAACC,GAAG,CAAC;EAC3B,CAAC;EAAA,OAEDC,GAAG,GAAH,aAAID,GAAW,EAAEE,KAAQ,EAAQ;IAC/B,IAAI,IAAI,CAACL,IAAI,CAACM,IAAI,IAAI,IAAI,CAACT,QAAQ,EAAE;MACnC,IAAMU,OAAO,GAAG,IAAI,CAACT,IAAK;MAC1B,IAAI,CAACE,IAAI,UAAO,CAACO,OAAO,CAACJ,GAAG,CAAC;MAC7B,IAAI,CAACL,IAAI,GAAGS,OAAO,CAACC,IAAI;IAC1B;IACA,IAAMC,KAAqB,GAAG;MAACN,GAAG,EAAHA;IAAG,CAAC;IACnC,IAAI,CAAC,IAAI,CAACL,IAAI,EAAE;MACd,IAAI,CAACA,IAAI,GAAGW,KAAK;IACnB;IACA,IAAI,CAAC,IAAI,CAACV,IAAI,EAAE;MACd,IAAI,CAACA,IAAI,GAAGU,KAAK;IACnB,CAAC,MAAM;MACL,IAAI,CAACV,IAAI,CAACS,IAAI,GAAGC,KAAK;MACtB,IAAI,CAACV,IAAI,GAAGU,KAAK;IACnB;IACA,IAAI,CAACT,IAAI,CAACI,GAAG,CAACD,GAAG,EAAEE,KAAK,CAAC;IACzB,OAAO,IAAI;EACb,CAAC;EAAA;AAAA;AAGH,SAASK,MAAM,CAACC,IAAY,EAAEC,EAAU,EAAU;EAChD,OAAOD,IAAI,GAAGC,EAAE;AAClB;AAEA,IAAMC,QAAkC,GAAG,CAAC,CAAC;AAC7CA,QAAQ,CAACnB,6EAAe,CAAC,GAAG,aAAa;;AAGzC;AACA,SAASoB,IAAI,GAAG,CAAC;AAAC;AAEX,IAAeC,aAAa;EAAA;EAAA,cAIbC,IAAI;IAAA,yLAAxB,iBAA0CC,CAAc,EAAEL,EAAU,EAAEM,OAAO;MAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,IAAPA,OAAO;gBAAPA,OAAO,GAAG,CAAC,CAAC;cAAA;cAC1Ef,GAAG,GAAGO,MAAM,CAACO,CAAC,CAACN,IAAI,EAAEC,EAAE,CAAC;cAAA,MAE1B,IAAI,CAACO,cAAc,CAACjB,GAAG,CAACC,GAAG,CAAC,IAAI,IAAI;gBAAA;gBAAA;cAAA;cAAA,iCAC/B,IAAI;YAAA;cAEPiB,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAAClB,GAAG,CAACC,GAAG,CAAC;cAAA,KACnCiB,QAAQ;gBAAA;gBAAA;cAAA;cAAA,iCACHA,QAAQ;YAAA;cAETC,GAAG,GAAG1B,kEAAc,CAAIkB,QAAQ,CAACI,CAAC,CAACN,IAAI,CAAC,EAAEC,EAAE,EAAEM,OAAO,EAAE;gBAACK,YAAY,EAAET;cAAI,CAAC,CAAC,SAC1E,CAAC,YAAM;gBACX,KAAI,CAACK,cAAc,CAACf,GAAG,CAACD,GAAG,EAAE,IAAI,CAAC;gBAClC,OAAO,IAAI;cACb,CAAC,CAAC,WACM,CAAC;gBAAA,OAAM,KAAI,CAACiB,QAAQ,UAAO,CAACjB,GAAG,CAAC;cAAA,EAAC;cAC3C,IAAI,CAACiB,QAAQ,CAAChB,GAAG,CAACD,GAAG,EAAEkB,GAAG,CAAC;cAAC,iCACrBA,GAAG;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAEb;IAAA;MAAA;IAAA;IAAA;EAAA;EAAA;AAAA;AAvBmBN,aAAa,CAClBI,cAAc,GAAmB,IAAIvB,SAAS,CAAC,GAAG,CAAC;AAD9CmB,aAAa,CAElBK,QAAQ,GAAuC,IAAInB,GAAG,EAAE;;;;;;;;;;;;;;;;;;;AChFzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AAAA,IAK3BwB,YAAY;EAAA;EAAA;IAAA;EAAA;EAAA;EAAA,OAC/BC,IAAI,GAAJ,gBAAO;IACL,OAAO;MAAM,SAAM;IAAc,QAAG,IAAI,CAACC,KAAK,CAACC,YAAY,CAAQ;EACrE,CAAC;EAAA;AAAA,EAHuCJ,gEAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEmC;AACc;AACD;AAEN;AACD;AACgB;AAAA,IAapCM,cAAc;EAAA;EAAA;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA,MACjCH,KAAK;IAAA,MACLI,UAAU;IAAA;EAAA;EAAA;EAAA,OAEVC,MAAM,GAAN,gBAAOC,KAAY,EAAE;IAAA;IACnB,gBAAMD,MAAM,YAACC,KAAK;IAClB,IAAML,YAAY,GAAG,IAAI,CAACD,KAAK,CAACC,YAAY;IAC5C,IAAMG,UAAU,GAAGpC,qEAAiB,CAAa,aAAa,EAAEiC,YAAY,CAAC;IAC7E,IAAI,CAACG,UAAU,EAAE;MACfhB,sDAAkB,CAACrB,wEAAU,EAAEkC,YAAY,CAAC,CAACO,IAAI,CAAC,UAACC,CAAC,EAAK;QACvD,IAAIA,CAAC,EAAE;UACL,MAAI,CAACL,UAAU,GAAGK,CAAC;UACnBnB,CAAC,CAACoB,MAAM,EAAE;QACZ;MACF,CAAC,CAAC;IACJ;IACA,IAAIN,UAAU,EAAE;MACd,IAAI,CAACA,UAAU,GAAGA,UAAU;IAC9B;EACF,CAAC;EAAA,OAEDL,IAAI,GAAJ,gBAAO;IACL,IAAMY,IAAI,GAAG,IAAI,CAACX,KAAK,CAACW,IAAI;IAC5B,IAAMC,MAAM,GAAG5C,uEAAmB,CAAC,kBAAkB,CAAC;IACtD,IAAM+C,SAAS,GAAGJ,IAAI,IAAI,qBAAqB,CAACK,IAAI,CAACL,IAAI,CAAC;IAC1D,IAAI,IAAI,CAACP,UAAU,EAAE;MAAA;MACnB,OAAO,EAAC,sEAAI;QACV,IAAI,EAAEO,IAAI,GAAGA,IAAI,GAAG3C,6DAAS,CAAC,YAAY,EAAE;UAACiB,EAAE,EAAE,IAAI,CAACe,KAAK,CAACC;QAAY,CAAC,CAAE;QAC3E,SAAM;MAAgB,uBAGpB,IAAI,CAACG,UAAU,qBAAf,iBAAiBc,KAAK,EAAE,OAExBN,MAAM,IAAI,EAAC,qDAAY;QAAC,YAAY,EAAE,IAAI,CAACZ,KAAK,CAACC;MAAa,EAAG,OAEjEc,SAAS,IAAI,EAAC,iBAAiB,OAAE,CAE9B;IACT,CAAC,MAAM;MACL,OAAO;QACL,SAAM;MAAkC,GAGtC/C,wEAAoB,CAAC,kDAAkD,CAAC,OAExE4C,MAAM,IAAI,EAAC,qDAAY;QAAC,YAAY,EAAE,IAAI,CAACZ,KAAK,CAACC;MAAa,EAAG,OAEjEc,SAAS,IAAI,EAAC,iBAAiB,OAAE,CAE9B;IACT;EACF,CAAC;EAAA;AAAA,EAnDyCb,sEAAI;AAAb;AAAA,IAsD7BmB,iBAAiB;EAAA;EAAA;IAAA;EAAA;EAAA;EAAA,QACrBtB,IAAI,GAAJ,gBAAO;IACL,OAAO;MAAM,SAAM;IAAmB,QAClC/B,wEAAoB,CAAC,uCAAuC,CAAC,MAC1D;EACT,CAAC;EAAA;AAAA,EAL6B6B,gEAAS;;;;;;;;;;;;;;;;;;;;AC9FzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE0D;AAEZ;AAAA,IAIzB0B,wBAAwB;EAAA;EAAA;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA,MAC3CvB,KAAK;IAAA;EAAA;EAAA,yBAEEwB,SAAS,GAAhB,mBAAiBxB,KAAoC,EAAE;IACrD,WAAMwB,SAAS,YAACxB,KAAK;IAErBA,KAAK,CAACyB,SAAS,GAAGzB,KAAK,CAAC0B,IAAI,CAACC,OAAO,EAAyB;EAC/D,CAAC;EAAA;EAAA,OACDC,IAAI,GAAJ,gBAAO;IACL,OAAO,cAAc;EACvB,CAAC;EAAA,OAEDC,cAAc,GAAd,0BAAiB;IACf,OAAO,IAAI,CAAC7B,KAAK,CAACyB,SAAS,CAACK,MAAM,IAAI,CAAC,GACrC,sEAAsE,GACtE,+EAA+E;EACnF,CAAC;EAAA,OAEDC,eAAe,GAAf,2BAAkB;IAChB,IAAI,IAAI,CAAC/B,KAAK,CAACyB,SAAS,CAACK,MAAM,IAAI,CAAC,EAAE;MACpC,OAAO;QACLE,MAAM,EAAE,EAAC,uDAAc;UAAC,YAAY,EAAE,IAAI,CAAChC,KAAK,CAACyB,SAAS,CAAC,CAAC;QAAE;MAChE,CAAC;IACH,CAAC,MAAM;MACL,OAAO;QACLQ,OAAO,EAAE,cACN,IAAI,CAACjC,KAAK,CAACyB,SAAS,CAACS,GAAG,CAAC,UAACjD,EAAE;UAAA,OAC3B,cAAI,EAAC,uDAAc;YAAC,YAAY,EAAEA;UAAG,EAAG,CAAK;QAAA,EAC9C;MAEL,CAAC;IACH;EACF,CAAC;EAAA;AAAA,EAhCmDqC,0EAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3B/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAG8C;AACW;AACtB;AAC2B;AACM;AACQ;AACpC;AACa;AACI;AACoB;AAE7EtD,wEAAoB,CAAC,yBAAyB,EAAE,UAASA,GAAG,EAAE;EAC5DA,GAAG,CAACyE,cAAc,CAACC,oBAAoB,GAAGnB,4EAAwB;EAClEoB,wBAAwB,EAAE;EAE1BC,oBAAoB,EAAE;EACtBC,mBAAmB,EAAE;AACvB,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA,SAASF,wBAAwB,GAAG;EAClC,SAASG,kBAAkB,GAAoB;IAC7C,IAAI,CAACC,CAAC,CAAC,cAAc,CAAC,CAACb,GAAG,CAAC,YAAW;MAAA;MACpC,IAAMc,CAAC,GAAG,IAAyB;MACnC,IAAIA,CAAC,CAACC,QAAQ,KAAKC,QAAQ,CAACC,QAAQ,CAACF,QAAQ,IAAID,CAAC,CAACI,IAAI,KAAKF,QAAQ,CAACC,QAAQ,CAACC,IAAI,EAAE;QAClF;MACF;MACA,IAAMC,KAAK,GAAGL,CAAC,CAACM,QAAQ,CAACD,KAAK,CAAC,eAAe,CAAC;MAC/C,IAAIA,KAAK,IAAI,IAAI,EAAE;QACjB;MACF;MACA,IACErF,uEAAmB,CAAC,yBAAyB,CAAC,IAC3CgF,CAAC,CAACO,IAAI,KAAKP,CAAC,CAACrC,IAAI,IACjB,CAACqC,CAAC,CAACQ,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAC1C;QACA,IAAMxD,YAAY,GAAGoD,KAAK,CAAC,CAAC,CAAC;QAC7B,IAAMK,IAAI,GAAGR,QAAQ,CAACS,aAAa,CAAC,MAAM,CAAC;QAC3CrE,CAAC,CAACsE,KAAK,CAACF,IAAI,EAAE;UAAC3D,IAAI,EAAE;YAAA,OAAMT,CAAC,CAACa,kEAAc,EAAE;cAACF,YAAY,EAAZA,YAAY;cAAEU,IAAI,EAAEqC,CAAC,CAACrC;YAAI,CAAC,CAAC;UAAA;QAAA,CAAC,CAAC;QAC5EqC,CAAC,CAACa,WAAW,CAACH,IAAI,CAAC;MACrB,CAAC,MAAM;QACLV,CAAC,CAACc,gBAAgB,CAAC,OAAO,EAAE,UAACC,CAAC,EAAK;UACjCzE,CAAC,CAAC2B,KAAK,CAACxC,GAAG,CAAC,KAAI,CAACuF,YAAY,CAAC,MAAM,CAAC,CAAC;UACtCD,CAAC,CAACE,cAAc,EAAE;QACpB,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;EACJ;EACA9B,4DAAM,CAACC,sFAAqB,EAAE,UAAU,EAAEU,kBAAkB,CAAC;EAC7DX,4DAAM,CAACC,sFAAqB,EAAE,UAAU,EAAEU,kBAAkB,CAAC;AAC/D;;AAEA;AACA;AACA;AACA,SAASF,oBAAoB,GAAG;EAC9BT,4DAAM,CAACE,yFAAwB,EAAE,OAAO,EAAE,UAAS8B,KAAK,EAAE;IACxD,IAAI,CAACnG,uEAAmB,CAAC,kBAAkB,CAAC,EAAE;MAC5C;IACF;IACA,IAAMgC,KAAK,GAAG,IAAI,CAACA,KAAkD;IACrE,IAAMC,YAAY,GAAGD,KAAK,CAACI,UAAU,CAACnB,EAAE,EAAE;IAC1C,IAAMiC,KAAK,GAAGiD,KAAK,CAAC5F,GAAG,CAAC,OAAO,CAAC;IAChC4F,KAAK,CAACC,UAAU,CAAC,OAAO,EAAE9E,CAAC,CAAC,IAAI,EAAE,CAChC4B,KAAK,CAACqC,IAAI,EACV,GAAG,EACHjE,CAAC,CAACQ,gEAAY,EAAE;MAACG,YAAY,EAAZA;IAAY,CAAC,CAAC,CAChC,CAAC,CAAC;EACL,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA,SAAS4C,mBAAmB,GAAG;EAC7BV,4DAAM,CAACG,6FAA4B,EAAE,WAAW,EAAE,UAAS6B,KAAK,EAAE;IAChE,IAAI,CAACnG,uEAAmB,CAAC,kBAAkB,CAAC,EAAE;MAC5C;IACF;IACA,IAAMgC,KAAK,GAAG,IAAI,CAACA,KAAkD;IACrE,IAAMC,YAAY,GAAGD,KAAK,CAACI,UAAU,CAACnB,EAAE,EAAE;IAC1CkF,KAAK,CAAC3B,GAAG,CAAC,IAAI,EAAElD,CAAC,CAACQ,gEAAY,EAAE;MAACG,YAAY,EAAZA;IAAY,CAAC,CAAC,EAAE,EAAE,CAAC;EACtD,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASoE,sBAAsB,GAAG;EAAA;EAChC,IAAM1C,OAAO,2BAAG3D,yEAAmB,qBAAnB,qBAAqB2D,OAAO;EAC5C,IAAIA,OAAO,EAAE;IACXA,OAAO,CAAC,GAAG,GAAGA,OAAO,EAAE,CAAC;IACxB6C,UAAU,CAAC;MAAA,OAAM7C,OAAO,CAACA,OAAO,EAAE,CAAC8C,KAAK,CAAC,CAAC,CAAC,CAAC;IAAA,GAAE,EAAE,CAAC;EACnD;AACF;AAEO,SAASC,qBAAqB,CAACC,GAAQ,EAAgB;EAC5D,IAAM1F,EAAE,GAAG0F,GAAG,CAACX,YAAY,CAAC,IAAI,CAAC;EACjC,IAAMY,GAAG,GAAG5G,qEAAiB,CAAC,aAAa,EAAEiB,EAAE,CAAC;EAChD,IAAI2F,GAAG,EAAE;IACP,IAAMxE,UAAU,GAAGwE,GAAiB;IACpCD,GAAG,CAACE,YAAY,CAAC,OAAO,EAAEzE,UAAU,CAACc,KAAK,EAAE,CAAC;EAC/C,CAAC,MAAM;IACL9B,sDAAkB,CAACrB,wEAAU,EAAEkB,EAAE,CAAC,CAACuB,IAAI,CAAC,UAACC,CAAC,EAAK;MAC7C,IAAIA,CAAC,EAAE4D,sBAAsB,EAAE;IACjC,CAAC,CAAC;IACF,OAAO,KAAK;EACd;EACAM,GAAG,CAACE,YAAY,CAAC,SAAS,EAAE7G,wEAAoB,CAAC,uCAAuC,CAAC,CAAC;AAC5F;;;;;;;;;;;AC3IA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;ACAA,IAAI8G,OAAO,GAAGC,sGAAiC;AAC/C,SAASC,mBAAmB,GAAG;EAC7B,YAAY;;EAAE;EACdC,MAAM,CAACC,OAAO,GAAGF,mBAAmB,GAAG,SAASA,mBAAmB,GAAG;IACpE,OAAOE,OAAO;EAChB,CAAC,EAAED,yBAAyB,GAAG,IAAI,EAAEA,yBAAyB,GAAGA,MAAM,CAACC,OAAO;EAC/E,IAAIA,OAAO,GAAG,CAAC,CAAC;IACdE,EAAE,GAAGC,MAAM,CAACnB,SAAS;IACrBoB,MAAM,GAAGF,EAAE,CAACG,cAAc;IAC1BC,cAAc,GAAGH,MAAM,CAACG,cAAc,IAAI,UAAUC,GAAG,EAAEjH,GAAG,EAAEkH,IAAI,EAAE;MAClED,GAAG,CAACjH,GAAG,CAAC,GAAGkH,IAAI,CAAChH,KAAK;IACvB,CAAC;IACDiH,OAAO,GAAG,UAAU,IAAI,OAAOC,MAAM,GAAGA,MAAM,GAAG,CAAC,CAAC;IACnDC,cAAc,GAAGF,OAAO,CAACG,QAAQ,IAAI,YAAY;IACjDC,mBAAmB,GAAGJ,OAAO,CAACK,aAAa,IAAI,iBAAiB;IAChEC,iBAAiB,GAAGN,OAAO,CAACO,WAAW,IAAI,eAAe;EAC5D,SAASC,MAAM,CAACV,GAAG,EAAEjH,GAAG,EAAEE,KAAK,EAAE;IAC/B,OAAO2G,MAAM,CAACG,cAAc,CAACC,GAAG,EAAEjH,GAAG,EAAE;MACrCE,KAAK,EAAEA,KAAK;MACZ0H,UAAU,EAAE,CAAC,CAAC;MACdC,YAAY,EAAE,CAAC,CAAC;MAChBC,QAAQ,EAAE,CAAC;IACb,CAAC,CAAC,EAAEb,GAAG,CAACjH,GAAG,CAAC;EACd;EACA,IAAI;IACF2H,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;EAChB,CAAC,CAAC,OAAOI,GAAG,EAAE;IACZJ,MAAM,GAAG,SAASA,MAAM,CAACV,GAAG,EAAEjH,GAAG,EAAEE,KAAK,EAAE;MACxC,OAAO+G,GAAG,CAACjH,GAAG,CAAC,GAAGE,KAAK;IACzB,CAAC;EACH;EACA,SAAS8H,IAAI,CAACC,OAAO,EAAEC,OAAO,EAAEC,IAAI,EAAEC,WAAW,EAAE;IACjD,IAAIC,cAAc,GAAGH,OAAO,IAAIA,OAAO,CAACxC,SAAS,YAAY4C,SAAS,GAAGJ,OAAO,GAAGI,SAAS;MAC1FC,SAAS,GAAG1B,MAAM,CAAC2B,MAAM,CAACH,cAAc,CAAC3C,SAAS,CAAC;MACnD+C,OAAO,GAAG,IAAIC,OAAO,CAACN,WAAW,IAAI,EAAE,CAAC;IAC1C,OAAOpB,cAAc,CAACuB,SAAS,EAAE,SAAS,EAAE;MAC1CrI,KAAK,EAAEyI,gBAAgB,CAACV,OAAO,EAAEE,IAAI,EAAEM,OAAO;IAChD,CAAC,CAAC,EAAEF,SAAS;EACf;EACA,SAASK,QAAQ,CAACC,EAAE,EAAE5B,GAAG,EAAE6B,GAAG,EAAE;IAC9B,IAAI;MACF,OAAO;QACLC,IAAI,EAAE,QAAQ;QACdD,GAAG,EAAED,EAAE,CAACG,IAAI,CAAC/B,GAAG,EAAE6B,GAAG;MACvB,CAAC;IACH,CAAC,CAAC,OAAOf,GAAG,EAAE;MACZ,OAAO;QACLgB,IAAI,EAAE,OAAO;QACbD,GAAG,EAAEf;MACP,CAAC;IACH;EACF;EACArB,OAAO,CAACsB,IAAI,GAAGA,IAAI;EACnB,IAAIiB,gBAAgB,GAAG,CAAC,CAAC;EACzB,SAASX,SAAS,GAAG,CAAC;EACtB,SAASY,iBAAiB,GAAG,CAAC;EAC9B,SAASC,0BAA0B,GAAG,CAAC;EACvC,IAAIC,iBAAiB,GAAG,CAAC,CAAC;EAC1BzB,MAAM,CAACyB,iBAAiB,EAAE/B,cAAc,EAAE,YAAY;IACpD,OAAO,IAAI;EACb,CAAC,CAAC;EACF,IAAIgC,QAAQ,GAAGxC,MAAM,CAACyC,cAAc;IAClCC,uBAAuB,GAAGF,QAAQ,IAAIA,QAAQ,CAACA,QAAQ,CAACG,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;EACtED,uBAAuB,IAAIA,uBAAuB,KAAK3C,EAAE,IAAIE,MAAM,CAACkC,IAAI,CAACO,uBAAuB,EAAElC,cAAc,CAAC,KAAK+B,iBAAiB,GAAGG,uBAAuB,CAAC;EAClK,IAAIE,EAAE,GAAGN,0BAA0B,CAACzD,SAAS,GAAG4C,SAAS,CAAC5C,SAAS,GAAGmB,MAAM,CAAC2B,MAAM,CAACY,iBAAiB,CAAC;EACtG,SAASM,qBAAqB,CAAChE,SAAS,EAAE;IACxC,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC,CAACiE,OAAO,CAAC,UAAUC,MAAM,EAAE;MACpDjC,MAAM,CAACjC,SAAS,EAAEkE,MAAM,EAAE,UAAUd,GAAG,EAAE;QACvC,OAAO,IAAI,CAACe,OAAO,CAACD,MAAM,EAAEd,GAAG,CAAC;MAClC,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EACA,SAASgB,aAAa,CAACvB,SAAS,EAAEwB,WAAW,EAAE;IAC7C,SAASC,MAAM,CAACJ,MAAM,EAAEd,GAAG,EAAEmB,OAAO,EAAEC,MAAM,EAAE;MAC5C,IAAIC,MAAM,GAAGvB,QAAQ,CAACL,SAAS,CAACqB,MAAM,CAAC,EAAErB,SAAS,EAAEO,GAAG,CAAC;MACxD,IAAI,OAAO,KAAKqB,MAAM,CAACpB,IAAI,EAAE;QAC3B,IAAIqB,MAAM,GAAGD,MAAM,CAACrB,GAAG;UACrB5I,KAAK,GAAGkK,MAAM,CAAClK,KAAK;QACtB,OAAOA,KAAK,IAAI,QAAQ,IAAIoG,OAAO,CAACpG,KAAK,CAAC,IAAI4G,MAAM,CAACkC,IAAI,CAAC9I,KAAK,EAAE,SAAS,CAAC,GAAG6J,WAAW,CAACE,OAAO,CAAC/J,KAAK,CAACmK,OAAO,CAAC,CAACrI,IAAI,CAAC,UAAU9B,KAAK,EAAE;UACrI8J,MAAM,CAAC,MAAM,EAAE9J,KAAK,EAAE+J,OAAO,EAAEC,MAAM,CAAC;QACxC,CAAC,EAAE,UAAUnC,GAAG,EAAE;UAChBiC,MAAM,CAAC,OAAO,EAAEjC,GAAG,EAAEkC,OAAO,EAAEC,MAAM,CAAC;QACvC,CAAC,CAAC,GAAGH,WAAW,CAACE,OAAO,CAAC/J,KAAK,CAAC,CAAC8B,IAAI,CAAC,UAAUsI,SAAS,EAAE;UACxDF,MAAM,CAAClK,KAAK,GAAGoK,SAAS,EAAEL,OAAO,CAACG,MAAM,CAAC;QAC3C,CAAC,EAAE,UAAUG,KAAK,EAAE;UAClB,OAAOP,MAAM,CAAC,OAAO,EAAEO,KAAK,EAAEN,OAAO,EAAEC,MAAM,CAAC;QAChD,CAAC,CAAC;MACJ;MACAA,MAAM,CAACC,MAAM,CAACrB,GAAG,CAAC;IACpB;IACA,IAAI0B,eAAe;IACnBxD,cAAc,CAAC,IAAI,EAAE,SAAS,EAAE;MAC9B9G,KAAK,EAAE,SAASA,KAAK,CAAC0J,MAAM,EAAEd,GAAG,EAAE;QACjC,SAAS2B,0BAA0B,GAAG;UACpC,OAAO,IAAIV,WAAW,CAAC,UAAUE,OAAO,EAAEC,MAAM,EAAE;YAChDF,MAAM,CAACJ,MAAM,EAAEd,GAAG,EAAEmB,OAAO,EAAEC,MAAM,CAAC;UACtC,CAAC,CAAC;QACJ;QACA,OAAOM,eAAe,GAAGA,eAAe,GAAGA,eAAe,CAACxI,IAAI,CAACyI,0BAA0B,EAAEA,0BAA0B,CAAC,GAAGA,0BAA0B,EAAE;MACxJ;IACF,CAAC,CAAC;EACJ;EACA,SAAS9B,gBAAgB,CAACV,OAAO,EAAEE,IAAI,EAAEM,OAAO,EAAE;IAChD,IAAIiC,KAAK,GAAG,gBAAgB;IAC5B,OAAO,UAAUd,MAAM,EAAEd,GAAG,EAAE;MAC5B,IAAI,WAAW,KAAK4B,KAAK,EAAE,MAAM,IAAIC,KAAK,CAAC,8BAA8B,CAAC;MAC1E,IAAI,WAAW,KAAKD,KAAK,EAAE;QACzB,IAAI,OAAO,KAAKd,MAAM,EAAE,MAAMd,GAAG;QACjC,OAAO8B,UAAU,EAAE;MACrB;MACA,KAAKnC,OAAO,CAACmB,MAAM,GAAGA,MAAM,EAAEnB,OAAO,CAACK,GAAG,GAAGA,GAAG,IAAI;QACjD,IAAI+B,QAAQ,GAAGpC,OAAO,CAACoC,QAAQ;QAC/B,IAAIA,QAAQ,EAAE;UACZ,IAAIC,cAAc,GAAGC,mBAAmB,CAACF,QAAQ,EAAEpC,OAAO,CAAC;UAC3D,IAAIqC,cAAc,EAAE;YAClB,IAAIA,cAAc,KAAK7B,gBAAgB,EAAE;YACzC,OAAO6B,cAAc;UACvB;QACF;QACA,IAAI,MAAM,KAAKrC,OAAO,CAACmB,MAAM,EAAEnB,OAAO,CAACuC,IAAI,GAAGvC,OAAO,CAACwC,KAAK,GAAGxC,OAAO,CAACK,GAAG,CAAC,KAAK,IAAI,OAAO,KAAKL,OAAO,CAACmB,MAAM,EAAE;UAC7G,IAAI,gBAAgB,KAAKc,KAAK,EAAE,MAAMA,KAAK,GAAG,WAAW,EAAEjC,OAAO,CAACK,GAAG;UACtEL,OAAO,CAACyC,iBAAiB,CAACzC,OAAO,CAACK,GAAG,CAAC;QACxC,CAAC,MAAM,QAAQ,KAAKL,OAAO,CAACmB,MAAM,IAAInB,OAAO,CAAC0C,MAAM,CAAC,QAAQ,EAAE1C,OAAO,CAACK,GAAG,CAAC;QAC3E4B,KAAK,GAAG,WAAW;QACnB,IAAIP,MAAM,GAAGvB,QAAQ,CAACX,OAAO,EAAEE,IAAI,EAAEM,OAAO,CAAC;QAC7C,IAAI,QAAQ,KAAK0B,MAAM,CAACpB,IAAI,EAAE;UAC5B,IAAI2B,KAAK,GAAGjC,OAAO,CAAC2C,IAAI,GAAG,WAAW,GAAG,gBAAgB,EAAEjB,MAAM,CAACrB,GAAG,KAAKG,gBAAgB,EAAE;UAC5F,OAAO;YACL/I,KAAK,EAAEiK,MAAM,CAACrB,GAAG;YACjBsC,IAAI,EAAE3C,OAAO,CAAC2C;UAChB,CAAC;QACH;QACA,OAAO,KAAKjB,MAAM,CAACpB,IAAI,KAAK2B,KAAK,GAAG,WAAW,EAAEjC,OAAO,CAACmB,MAAM,GAAG,OAAO,EAAEnB,OAAO,CAACK,GAAG,GAAGqB,MAAM,CAACrB,GAAG,CAAC;MACtG;IACF,CAAC;EACH;EACA,SAASiC,mBAAmB,CAACF,QAAQ,EAAEpC,OAAO,EAAE;IAC9C,IAAI4C,UAAU,GAAG5C,OAAO,CAACmB,MAAM;MAC7BA,MAAM,GAAGiB,QAAQ,CAACvD,QAAQ,CAAC+D,UAAU,CAAC;IACxC,IAAIC,SAAS,KAAK1B,MAAM,EAAE,OAAOnB,OAAO,CAACoC,QAAQ,GAAG,IAAI,EAAE,OAAO,KAAKQ,UAAU,IAAIR,QAAQ,CAACvD,QAAQ,CAAC,QAAQ,CAAC,KAAKmB,OAAO,CAACmB,MAAM,GAAG,QAAQ,EAAEnB,OAAO,CAACK,GAAG,GAAGwC,SAAS,EAAEP,mBAAmB,CAACF,QAAQ,EAAEpC,OAAO,CAAC,EAAE,OAAO,KAAKA,OAAO,CAACmB,MAAM,CAAC,IAAI,QAAQ,KAAKyB,UAAU,KAAK5C,OAAO,CAACmB,MAAM,GAAG,OAAO,EAAEnB,OAAO,CAACK,GAAG,GAAG,IAAIyC,SAAS,CAAC,mCAAmC,GAAGF,UAAU,GAAG,UAAU,CAAC,CAAC,EAAEpC,gBAAgB;IAClZ,IAAIkB,MAAM,GAAGvB,QAAQ,CAACgB,MAAM,EAAEiB,QAAQ,CAACvD,QAAQ,EAAEmB,OAAO,CAACK,GAAG,CAAC;IAC7D,IAAI,OAAO,KAAKqB,MAAM,CAACpB,IAAI,EAAE,OAAON,OAAO,CAACmB,MAAM,GAAG,OAAO,EAAEnB,OAAO,CAACK,GAAG,GAAGqB,MAAM,CAACrB,GAAG,EAAEL,OAAO,CAACoC,QAAQ,GAAG,IAAI,EAAE5B,gBAAgB;IACjI,IAAIuC,IAAI,GAAGrB,MAAM,CAACrB,GAAG;IACrB,OAAO0C,IAAI,GAAGA,IAAI,CAACJ,IAAI,IAAI3C,OAAO,CAACoC,QAAQ,CAACY,UAAU,CAAC,GAAGD,IAAI,CAACtL,KAAK,EAAEuI,OAAO,CAACpI,IAAI,GAAGwK,QAAQ,CAACa,OAAO,EAAE,QAAQ,KAAKjD,OAAO,CAACmB,MAAM,KAAKnB,OAAO,CAACmB,MAAM,GAAG,MAAM,EAAEnB,OAAO,CAACK,GAAG,GAAGwC,SAAS,CAAC,EAAE7C,OAAO,CAACoC,QAAQ,GAAG,IAAI,EAAE5B,gBAAgB,IAAIuC,IAAI,IAAI/C,OAAO,CAACmB,MAAM,GAAG,OAAO,EAAEnB,OAAO,CAACK,GAAG,GAAG,IAAIyC,SAAS,CAAC,kCAAkC,CAAC,EAAE9C,OAAO,CAACoC,QAAQ,GAAG,IAAI,EAAE5B,gBAAgB,CAAC;EACtX;EACA,SAAS0C,YAAY,CAACC,IAAI,EAAE;IAC1B,IAAItL,KAAK,GAAG;MACVuL,MAAM,EAAED,IAAI,CAAC,CAAC;IAChB,CAAC;IACD,CAAC,IAAIA,IAAI,KAAKtL,KAAK,CAACwL,QAAQ,GAAGF,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAIA,IAAI,KAAKtL,KAAK,CAACyL,UAAU,GAAGH,IAAI,CAAC,CAAC,CAAC,EAAEtL,KAAK,CAAC0L,QAAQ,GAAGJ,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAACK,UAAU,CAACC,IAAI,CAAC5L,KAAK,CAAC;EAC3I;EACA,SAAS6L,aAAa,CAAC7L,KAAK,EAAE;IAC5B,IAAI6J,MAAM,GAAG7J,KAAK,CAAC8L,UAAU,IAAI,CAAC,CAAC;IACnCjC,MAAM,CAACpB,IAAI,GAAG,QAAQ,EAAE,OAAOoB,MAAM,CAACrB,GAAG,EAAExI,KAAK,CAAC8L,UAAU,GAAGjC,MAAM;EACtE;EACA,SAASzB,OAAO,CAACN,WAAW,EAAE;IAC5B,IAAI,CAAC6D,UAAU,GAAG,CAAC;MACjBJ,MAAM,EAAE;IACV,CAAC,CAAC,EAAEzD,WAAW,CAACuB,OAAO,CAACgC,YAAY,EAAE,IAAI,CAAC,EAAE,IAAI,CAACU,KAAK,CAAC,CAAC,CAAC,CAAC;EAC7D;EACA,SAAS7C,MAAM,CAAC8C,QAAQ,EAAE;IACxB,IAAIA,QAAQ,EAAE;MACZ,IAAIC,cAAc,GAAGD,QAAQ,CAACjF,cAAc,CAAC;MAC7C,IAAIkF,cAAc,EAAE,OAAOA,cAAc,CAACvD,IAAI,CAACsD,QAAQ,CAAC;MACxD,IAAI,UAAU,IAAI,OAAOA,QAAQ,CAACjM,IAAI,EAAE,OAAOiM,QAAQ;MACvD,IAAI,CAACE,KAAK,CAACF,QAAQ,CAAChJ,MAAM,CAAC,EAAE;QAC3B,IAAImJ,CAAC,GAAG,CAAC,CAAC;UACRpM,IAAI,GAAG,SAASA,IAAI,GAAG;YACrB,OAAO,EAAEoM,CAAC,GAAGH,QAAQ,CAAChJ,MAAM,GAAG;cAC7B,IAAIwD,MAAM,CAACkC,IAAI,CAACsD,QAAQ,EAAEG,CAAC,CAAC,EAAE,OAAOpM,IAAI,CAACH,KAAK,GAAGoM,QAAQ,CAACG,CAAC,CAAC,EAAEpM,IAAI,CAAC+K,IAAI,GAAG,CAAC,CAAC,EAAE/K,IAAI;YACrF;YACA,OAAOA,IAAI,CAACH,KAAK,GAAGoL,SAAS,EAAEjL,IAAI,CAAC+K,IAAI,GAAG,CAAC,CAAC,EAAE/K,IAAI;UACrD,CAAC;QACH,OAAOA,IAAI,CAACA,IAAI,GAAGA,IAAI;MACzB;IACF;IACA,OAAO;MACLA,IAAI,EAAEuK;IACR,CAAC;EACH;EACA,SAASA,UAAU,GAAG;IACpB,OAAO;MACL1K,KAAK,EAAEoL,SAAS;MAChBF,IAAI,EAAE,CAAC;IACT,CAAC;EACH;EACA,OAAOlC,iBAAiB,CAACxD,SAAS,GAAGyD,0BAA0B,EAAEnC,cAAc,CAACyC,EAAE,EAAE,aAAa,EAAE;IACjGvJ,KAAK,EAAEiJ,0BAA0B;IACjCtB,YAAY,EAAE,CAAC;EACjB,CAAC,CAAC,EAAEb,cAAc,CAACmC,0BAA0B,EAAE,aAAa,EAAE;IAC5DjJ,KAAK,EAAEgJ,iBAAiB;IACxBrB,YAAY,EAAE,CAAC;EACjB,CAAC,CAAC,EAAEqB,iBAAiB,CAACwD,WAAW,GAAG/E,MAAM,CAACwB,0BAA0B,EAAE1B,iBAAiB,EAAE,mBAAmB,CAAC,EAAEf,OAAO,CAACiG,mBAAmB,GAAG,UAAUC,MAAM,EAAE;IAC9J,IAAIC,IAAI,GAAG,UAAU,IAAI,OAAOD,MAAM,IAAIA,MAAM,CAACE,WAAW;IAC5D,OAAO,CAAC,CAACD,IAAI,KAAKA,IAAI,KAAK3D,iBAAiB,IAAI,mBAAmB,MAAM2D,IAAI,CAACH,WAAW,IAAIG,IAAI,CAACrM,IAAI,CAAC,CAAC;EAC1G,CAAC,EAAEkG,OAAO,CAACqG,IAAI,GAAG,UAAUH,MAAM,EAAE;IAClC,OAAO/F,MAAM,CAACmG,cAAc,GAAGnG,MAAM,CAACmG,cAAc,CAACJ,MAAM,EAAEzD,0BAA0B,CAAC,IAAIyD,MAAM,CAACK,SAAS,GAAG9D,0BAA0B,EAAExB,MAAM,CAACiF,MAAM,EAAEnF,iBAAiB,EAAE,mBAAmB,CAAC,CAAC,EAAEmF,MAAM,CAAClH,SAAS,GAAGmB,MAAM,CAAC2B,MAAM,CAACiB,EAAE,CAAC,EAAEmD,MAAM;EAClP,CAAC,EAAElG,OAAO,CAACwG,KAAK,GAAG,UAAUpE,GAAG,EAAE;IAChC,OAAO;MACLuB,OAAO,EAAEvB;IACX,CAAC;EACH,CAAC,EAAEY,qBAAqB,CAACI,aAAa,CAACpE,SAAS,CAAC,EAAEiC,MAAM,CAACmC,aAAa,CAACpE,SAAS,EAAE6B,mBAAmB,EAAE,YAAY;IAClH,OAAO,IAAI;EACb,CAAC,CAAC,EAAEb,OAAO,CAACoD,aAAa,GAAGA,aAAa,EAAEpD,OAAO,CAACyG,KAAK,GAAG,UAAUlF,OAAO,EAAEC,OAAO,EAAEC,IAAI,EAAEC,WAAW,EAAE2B,WAAW,EAAE;IACrH,KAAK,CAAC,KAAKA,WAAW,KAAKA,WAAW,GAAGqD,OAAO,CAAC;IACjD,IAAIC,IAAI,GAAG,IAAIvD,aAAa,CAAC9B,IAAI,CAACC,OAAO,EAAEC,OAAO,EAAEC,IAAI,EAAEC,WAAW,CAAC,EAAE2B,WAAW,CAAC;IACpF,OAAOrD,OAAO,CAACiG,mBAAmB,CAACzE,OAAO,CAAC,GAAGmF,IAAI,GAAGA,IAAI,CAAChN,IAAI,EAAE,CAAC2B,IAAI,CAAC,UAAUoI,MAAM,EAAE;MACtF,OAAOA,MAAM,CAACgB,IAAI,GAAGhB,MAAM,CAAClK,KAAK,GAAGmN,IAAI,CAAChN,IAAI,EAAE;IACjD,CAAC,CAAC;EACJ,CAAC,EAAEqJ,qBAAqB,CAACD,EAAE,CAAC,EAAE9B,MAAM,CAAC8B,EAAE,EAAEhC,iBAAiB,EAAE,WAAW,CAAC,EAAEE,MAAM,CAAC8B,EAAE,EAAEpC,cAAc,EAAE,YAAY;IAC/G,OAAO,IAAI;EACb,CAAC,CAAC,EAAEM,MAAM,CAAC8B,EAAE,EAAE,UAAU,EAAE,YAAY;IACrC,OAAO,oBAAoB;EAC7B,CAAC,CAAC,EAAE/C,OAAO,CAAC4G,IAAI,GAAG,UAAUC,GAAG,EAAE;IAChC,IAAIC,MAAM,GAAG3G,MAAM,CAAC0G,GAAG,CAAC;MACtBD,IAAI,GAAG,EAAE;IACX,KAAK,IAAItN,GAAG,IAAIwN,MAAM,EAAE;MACtBF,IAAI,CAACpB,IAAI,CAAClM,GAAG,CAAC;IAChB;IACA,OAAOsN,IAAI,CAACG,OAAO,EAAE,EAAE,SAASpN,IAAI,GAAG;MACrC,OAAOiN,IAAI,CAAChK,MAAM,GAAG;QACnB,IAAItD,GAAG,GAAGsN,IAAI,CAACI,GAAG,EAAE;QACpB,IAAI1N,GAAG,IAAIwN,MAAM,EAAE,OAAOnN,IAAI,CAACH,KAAK,GAAGF,GAAG,EAAEK,IAAI,CAAC+K,IAAI,GAAG,CAAC,CAAC,EAAE/K,IAAI;MAClE;MACA,OAAOA,IAAI,CAAC+K,IAAI,GAAG,CAAC,CAAC,EAAE/K,IAAI;IAC7B,CAAC;EACH,CAAC,EAAEqG,OAAO,CAAC8C,MAAM,GAAGA,MAAM,EAAEd,OAAO,CAAChD,SAAS,GAAG;IAC9CoH,WAAW,EAAEpE,OAAO;IACpB2D,KAAK,EAAE,SAASA,KAAK,CAACsB,aAAa,EAAE;MACnC,IAAI,IAAI,CAACC,IAAI,GAAG,CAAC,EAAE,IAAI,CAACvN,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC2K,IAAI,GAAG,IAAI,CAACC,KAAK,GAAGK,SAAS,EAAE,IAAI,CAACF,IAAI,GAAG,CAAC,CAAC,EAAE,IAAI,CAACP,QAAQ,GAAG,IAAI,EAAE,IAAI,CAACjB,MAAM,GAAG,MAAM,EAAE,IAAI,CAACd,GAAG,GAAGwC,SAAS,EAAE,IAAI,CAACW,UAAU,CAACtC,OAAO,CAACwC,aAAa,CAAC,EAAE,CAACwB,aAAa,EAAE,KAAK,IAAInN,IAAI,IAAI,IAAI,EAAE;QACrO,GAAG,KAAKA,IAAI,CAACqN,MAAM,CAAC,CAAC,CAAC,IAAI/G,MAAM,CAACkC,IAAI,CAAC,IAAI,EAAExI,IAAI,CAAC,IAAI,CAACgM,KAAK,CAAC,CAAChM,IAAI,CAACyF,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAACzF,IAAI,CAAC,GAAG8K,SAAS,CAAC;MACzG;IACF,CAAC;IACDwC,IAAI,EAAE,SAASA,IAAI,GAAG;MACpB,IAAI,CAAC1C,IAAI,GAAG,CAAC,CAAC;MACd,IAAI2C,UAAU,GAAG,IAAI,CAAC9B,UAAU,CAAC,CAAC,CAAC,CAACG,UAAU;MAC9C,IAAI,OAAO,KAAK2B,UAAU,CAAChF,IAAI,EAAE,MAAMgF,UAAU,CAACjF,GAAG;MACrD,OAAO,IAAI,CAACkF,IAAI;IAClB,CAAC;IACD9C,iBAAiB,EAAE,SAASA,iBAAiB,CAAC+C,SAAS,EAAE;MACvD,IAAI,IAAI,CAAC7C,IAAI,EAAE,MAAM6C,SAAS;MAC9B,IAAIxF,OAAO,GAAG,IAAI;MAClB,SAASyF,MAAM,CAACC,GAAG,EAAEC,MAAM,EAAE;QAC3B,OAAOjE,MAAM,CAACpB,IAAI,GAAG,OAAO,EAAEoB,MAAM,CAACrB,GAAG,GAAGmF,SAAS,EAAExF,OAAO,CAACpI,IAAI,GAAG8N,GAAG,EAAEC,MAAM,KAAK3F,OAAO,CAACmB,MAAM,GAAG,MAAM,EAAEnB,OAAO,CAACK,GAAG,GAAGwC,SAAS,CAAC,EAAE,CAAC,CAAC8C,MAAM;MAClJ;MACA,KAAK,IAAI3B,CAAC,GAAG,IAAI,CAACR,UAAU,CAAC3I,MAAM,GAAG,CAAC,EAAEmJ,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;QACpD,IAAInM,KAAK,GAAG,IAAI,CAAC2L,UAAU,CAACQ,CAAC,CAAC;UAC5BtC,MAAM,GAAG7J,KAAK,CAAC8L,UAAU;QAC3B,IAAI,MAAM,KAAK9L,KAAK,CAACuL,MAAM,EAAE,OAAOqC,MAAM,CAAC,KAAK,CAAC;QACjD,IAAI5N,KAAK,CAACuL,MAAM,IAAI,IAAI,CAAC+B,IAAI,EAAE;UAC7B,IAAIS,QAAQ,GAAGvH,MAAM,CAACkC,IAAI,CAAC1I,KAAK,EAAE,UAAU,CAAC;YAC3CgO,UAAU,GAAGxH,MAAM,CAACkC,IAAI,CAAC1I,KAAK,EAAE,YAAY,CAAC;UAC/C,IAAI+N,QAAQ,IAAIC,UAAU,EAAE;YAC1B,IAAI,IAAI,CAACV,IAAI,GAAGtN,KAAK,CAACwL,QAAQ,EAAE,OAAOoC,MAAM,CAAC5N,KAAK,CAACwL,QAAQ,EAAE,CAAC,CAAC,CAAC;YACjE,IAAI,IAAI,CAAC8B,IAAI,GAAGtN,KAAK,CAACyL,UAAU,EAAE,OAAOmC,MAAM,CAAC5N,KAAK,CAACyL,UAAU,CAAC;UACnE,CAAC,MAAM,IAAIsC,QAAQ,EAAE;YACnB,IAAI,IAAI,CAACT,IAAI,GAAGtN,KAAK,CAACwL,QAAQ,EAAE,OAAOoC,MAAM,CAAC5N,KAAK,CAACwL,QAAQ,EAAE,CAAC,CAAC,CAAC;UACnE,CAAC,MAAM;YACL,IAAI,CAACwC,UAAU,EAAE,MAAM,IAAI3D,KAAK,CAAC,wCAAwC,CAAC;YAC1E,IAAI,IAAI,CAACiD,IAAI,GAAGtN,KAAK,CAACyL,UAAU,EAAE,OAAOmC,MAAM,CAAC5N,KAAK,CAACyL,UAAU,CAAC;UACnE;QACF;MACF;IACF,CAAC;IACDZ,MAAM,EAAE,SAASA,MAAM,CAACpC,IAAI,EAAED,GAAG,EAAE;MACjC,KAAK,IAAI2D,CAAC,GAAG,IAAI,CAACR,UAAU,CAAC3I,MAAM,GAAG,CAAC,EAAEmJ,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;QACpD,IAAInM,KAAK,GAAG,IAAI,CAAC2L,UAAU,CAACQ,CAAC,CAAC;QAC9B,IAAInM,KAAK,CAACuL,MAAM,IAAI,IAAI,CAAC+B,IAAI,IAAI9G,MAAM,CAACkC,IAAI,CAAC1I,KAAK,EAAE,YAAY,CAAC,IAAI,IAAI,CAACsN,IAAI,GAAGtN,KAAK,CAACyL,UAAU,EAAE;UACjG,IAAIwC,YAAY,GAAGjO,KAAK;UACxB;QACF;MACF;MACAiO,YAAY,KAAK,OAAO,KAAKxF,IAAI,IAAI,UAAU,KAAKA,IAAI,CAAC,IAAIwF,YAAY,CAAC1C,MAAM,IAAI/C,GAAG,IAAIA,GAAG,IAAIyF,YAAY,CAACxC,UAAU,KAAKwC,YAAY,GAAG,IAAI,CAAC;MAClJ,IAAIpE,MAAM,GAAGoE,YAAY,GAAGA,YAAY,CAACnC,UAAU,GAAG,CAAC,CAAC;MACxD,OAAOjC,MAAM,CAACpB,IAAI,GAAGA,IAAI,EAAEoB,MAAM,CAACrB,GAAG,GAAGA,GAAG,EAAEyF,YAAY,IAAI,IAAI,CAAC3E,MAAM,GAAG,MAAM,EAAE,IAAI,CAACvJ,IAAI,GAAGkO,YAAY,CAACxC,UAAU,EAAE9C,gBAAgB,IAAI,IAAI,CAACuF,QAAQ,CAACrE,MAAM,CAAC;IACnK,CAAC;IACDqE,QAAQ,EAAE,SAASA,QAAQ,CAACrE,MAAM,EAAE6B,QAAQ,EAAE;MAC5C,IAAI,OAAO,KAAK7B,MAAM,CAACpB,IAAI,EAAE,MAAMoB,MAAM,CAACrB,GAAG;MAC7C,OAAO,OAAO,KAAKqB,MAAM,CAACpB,IAAI,IAAI,UAAU,KAAKoB,MAAM,CAACpB,IAAI,GAAG,IAAI,CAAC1I,IAAI,GAAG8J,MAAM,CAACrB,GAAG,GAAG,QAAQ,KAAKqB,MAAM,CAACpB,IAAI,IAAI,IAAI,CAACiF,IAAI,GAAG,IAAI,CAAClF,GAAG,GAAGqB,MAAM,CAACrB,GAAG,EAAE,IAAI,CAACc,MAAM,GAAG,QAAQ,EAAE,IAAI,CAACvJ,IAAI,GAAG,KAAK,IAAI,QAAQ,KAAK8J,MAAM,CAACpB,IAAI,IAAIiD,QAAQ,KAAK,IAAI,CAAC3L,IAAI,GAAG2L,QAAQ,CAAC,EAAE/C,gBAAgB;IACtR,CAAC;IACDwF,MAAM,EAAE,SAASA,MAAM,CAAC1C,UAAU,EAAE;MAClC,KAAK,IAAIU,CAAC,GAAG,IAAI,CAACR,UAAU,CAAC3I,MAAM,GAAG,CAAC,EAAEmJ,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;QACpD,IAAInM,KAAK,GAAG,IAAI,CAAC2L,UAAU,CAACQ,CAAC,CAAC;QAC9B,IAAInM,KAAK,CAACyL,UAAU,KAAKA,UAAU,EAAE,OAAO,IAAI,CAACyC,QAAQ,CAAClO,KAAK,CAAC8L,UAAU,EAAE9L,KAAK,CAAC0L,QAAQ,CAAC,EAAEG,aAAa,CAAC7L,KAAK,CAAC,EAAE2I,gBAAgB;MACrI;IACF,CAAC;IACD,OAAO,EAAE,SAASyF,MAAM,CAAC7C,MAAM,EAAE;MAC/B,KAAK,IAAIY,CAAC,GAAG,IAAI,CAACR,UAAU,CAAC3I,MAAM,GAAG,CAAC,EAAEmJ,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;QACpD,IAAInM,KAAK,GAAG,IAAI,CAAC2L,UAAU,CAACQ,CAAC,CAAC;QAC9B,IAAInM,KAAK,CAACuL,MAAM,KAAKA,MAAM,EAAE;UAC3B,IAAI1B,MAAM,GAAG7J,KAAK,CAAC8L,UAAU;UAC7B,IAAI,OAAO,KAAKjC,MAAM,CAACpB,IAAI,EAAE;YAC3B,IAAI4F,MAAM,GAAGxE,MAAM,CAACrB,GAAG;YACvBqD,aAAa,CAAC7L,KAAK,CAAC;UACtB;UACA,OAAOqO,MAAM;QACf;MACF;MACA,MAAM,IAAIhE,KAAK,CAAC,uBAAuB,CAAC;IAC1C,CAAC;IACDiE,aAAa,EAAE,SAASA,aAAa,CAACtC,QAAQ,EAAEb,UAAU,EAAEC,OAAO,EAAE;MACnE,OAAO,IAAI,CAACb,QAAQ,GAAG;QACrBvD,QAAQ,EAAEkC,MAAM,CAAC8C,QAAQ,CAAC;QAC1Bb,UAAU,EAAEA,UAAU;QACtBC,OAAO,EAAEA;MACX,CAAC,EAAE,MAAM,KAAK,IAAI,CAAC9B,MAAM,KAAK,IAAI,CAACd,GAAG,GAAGwC,SAAS,CAAC,EAAErC,gBAAgB;IACvE;EACF,CAAC,EAAEvC,OAAO;AACZ;AACAD,MAAM,CAACC,OAAO,GAAGF,mBAAmB,EAAEC,yBAAyB,GAAG,IAAI,EAAEA,yBAAyB,GAAGA,MAAM,CAACC,OAAO;;;;;;;;;;ACrTlH,SAASJ,OAAO,CAACW,GAAG,EAAE;EACpB,yBAAyB;;EAEzB,OAAO,CAACR,MAAM,CAACC,OAAO,GAAGJ,OAAO,GAAG,UAAU,IAAI,OAAOc,MAAM,IAAI,QAAQ,IAAI,OAAOA,MAAM,CAACE,QAAQ,GAAG,UAAUL,GAAG,EAAE;IACpH,OAAO,OAAOA,GAAG;EACnB,CAAC,GAAG,UAAUA,GAAG,EAAE;IACjB,OAAOA,GAAG,IAAI,UAAU,IAAI,OAAOG,MAAM,IAAIH,GAAG,CAAC6F,WAAW,KAAK1F,MAAM,IAAIH,GAAG,KAAKG,MAAM,CAAC1B,SAAS,GAAG,QAAQ,GAAG,OAAOuB,GAAG;EAC7H,CAAC,EAAER,yBAAyB,GAAG,IAAI,EAAEA,yBAAyB,GAAGA,MAAM,CAACC,OAAO,GAAGJ,OAAO,CAACW,GAAG,CAAC;AAChG;AACAR,MAAM,CAACC,OAAO,GAAGJ,OAAO,EAAEG,yBAAyB,GAAG,IAAI,EAAEA,yBAAyB,GAAGA,MAAM,CAACC,OAAO;;;;;;;;;;ACTtG;;AAEA,IAAImI,OAAO,GAAGtI,mBAAO,CAAC,kGAA+B,CAAC,EAAE;AACxDE,MAAM,CAACC,OAAO,GAAGmI,OAAO;;AAExB;AACA,IAAI;EACFC,kBAAkB,GAAGD,OAAO;AAC9B,CAAC,CAAC,OAAOE,oBAAoB,EAAE;EAC7B,IAAI,OAAOC,UAAU,KAAK,QAAQ,EAAE;IAClCA,UAAU,CAACF,kBAAkB,GAAGD,OAAO;EACzC,CAAC,MAAM;IACLI,QAAQ,CAAC,GAAG,EAAE,wBAAwB,CAAC,CAACJ,OAAO,CAAC;EAClD;AACF;;;;;;;;;;;;;;;ACdA,SAASK,kBAAkB,CAACC,GAAG,EAAElF,OAAO,EAAEC,MAAM,EAAEkF,KAAK,EAAEC,MAAM,EAAErP,GAAG,EAAE8I,GAAG,EAAE;EACzE,IAAI;IACF,IAAI0C,IAAI,GAAG2D,GAAG,CAACnP,GAAG,CAAC,CAAC8I,GAAG,CAAC;IACxB,IAAI5I,KAAK,GAAGsL,IAAI,CAACtL,KAAK;EACxB,CAAC,CAAC,OAAOqK,KAAK,EAAE;IACdL,MAAM,CAACK,KAAK,CAAC;IACb;EACF;EACA,IAAIiB,IAAI,CAACJ,IAAI,EAAE;IACbnB,OAAO,CAAC/J,KAAK,CAAC;EAChB,CAAC,MAAM;IACLkN,OAAO,CAACnD,OAAO,CAAC/J,KAAK,CAAC,CAAC8B,IAAI,CAACoN,KAAK,EAAEC,MAAM,CAAC;EAC5C;AACF;AACe,SAASC,iBAAiB,CAACzG,EAAE,EAAE;EAC5C,OAAO,YAAY;IACjB,IAAIV,IAAI,GAAG,IAAI;MACboH,IAAI,GAAGC,SAAS;IAClB,OAAO,IAAIpC,OAAO,CAAC,UAAUnD,OAAO,EAAEC,MAAM,EAAE;MAC5C,IAAIiF,GAAG,GAAGtG,EAAE,CAAC4G,KAAK,CAACtH,IAAI,EAAEoH,IAAI,CAAC;MAC9B,SAASH,KAAK,CAAClP,KAAK,EAAE;QACpBgP,kBAAkB,CAACC,GAAG,EAAElF,OAAO,EAAEC,MAAM,EAAEkF,KAAK,EAAEC,MAAM,EAAE,MAAM,EAAEnP,KAAK,CAAC;MACxE;MACA,SAASmP,MAAM,CAACtH,GAAG,EAAE;QACnBmH,kBAAkB,CAACC,GAAG,EAAElF,OAAO,EAAEC,MAAM,EAAEkF,KAAK,EAAEC,MAAM,EAAE,OAAO,EAAEtH,GAAG,CAAC;MACvE;MACAqH,KAAK,CAAC9D,SAAS,CAAC;IAClB,CAAC,CAAC;EACJ,CAAC;AACH;;;;;;;;;;;;;;;;AC7BiD;AAClC,SAASoE,cAAc,CAACC,QAAQ,EAAEC,UAAU,EAAE;EAC3DD,QAAQ,CAACjK,SAAS,GAAGmB,MAAM,CAAC2B,MAAM,CAACoH,UAAU,CAAClK,SAAS,CAAC;EACxDiK,QAAQ,CAACjK,SAAS,CAACoH,WAAW,GAAG6C,QAAQ;EACzC3C,8DAAc,CAAC2C,QAAQ,EAAEC,UAAU,CAAC;AACtC;;;;;;;;;;;;;;;ACLe,SAASC,eAAe,CAACC,CAAC,EAAEC,CAAC,EAAE;EAC5CF,eAAe,GAAGhJ,MAAM,CAACmG,cAAc,GAAGnG,MAAM,CAACmG,cAAc,CAACgD,IAAI,EAAE,GAAG,SAASH,eAAe,CAACC,CAAC,EAAEC,CAAC,EAAE;IACtGD,CAAC,CAAC7C,SAAS,GAAG8C,CAAC;IACf,OAAOD,CAAC;EACV,CAAC;EACD,OAAOD,eAAe,CAACC,CAAC,EAAEC,CAAC,CAAC;AAC9B;;;;;;UCNA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D","sources":["webpack://@club-1/flarum-ext-cross-references/./src/forum/cache.ts","webpack://@club-1/flarum-ext-cross-references/./src/forum/components/DiscussionId.tsx","webpack://@club-1/flarum-ext-cross-references/./src/forum/components/DiscussionLink.tsx","webpack://@club-1/flarum-ext-cross-references/./src/forum/components/DiscussionReferencedPost.tsx","webpack://@club-1/flarum-ext-cross-references/./src/forum/index.ts","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['common/Component']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['common/components/Link']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['common/extend']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['forum/app']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['forum/components/DiscussionHero']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@club-1/flarum-ext-cross-references/external root \"flarum.core.compat['forum/components/EventPost']\"","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/regenerator/index.js","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@club-1/flarum-ext-cross-references/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@club-1/flarum-ext-cross-references/webpack/bootstrap","webpack://@club-1/flarum-ext-cross-references/webpack/runtime/compat get default export","webpack://@club-1/flarum-ext-cross-references/webpack/runtime/define property getters","webpack://@club-1/flarum-ext-cross-references/webpack/runtime/hasOwnProperty shorthand","webpack://@club-1/flarum-ext-cross-references/webpack/runtime/make namespace object"],"sourcesContent":["/*\n * This file is part of club-1/flarum-ext-cross-references.\n *\n * Copyright (c) 2023 Nicolas Peugnet <nicolas@club1.fr>.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n *\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport Model from 'flarum/common/Model';\nimport Discussion from 'flarum/common/models/Discussion';\nimport app from 'flarum/forum/app';\n\nexport interface Cache<T> {\n  get(key: string): T | undefined\n  set(key: string, value: T): this\n}\n\ntype FIFOCacheEntry = {key: string, next?: FIFOCacheEntry};\n\nexport class FIFOCache<T> implements Cache<T> {\n  protected head?: FIFOCacheEntry;\n  protected tail?: FIFOCacheEntry;\n  protected data: Map<string, T> = new Map();\n  protected capacity: number;\n\n  constructor(capacity: number) {\n    this.capacity = capacity;\n  }\n\n  get(key: string): T | undefined {\n    return this.data.get(key);\n  }\n\n  set(key: string, value: T): this {\n    if (this.data.size == this.capacity) {\n      const evicted = this.head!;\n      this.data.delete(evicted.key);\n      this.head = evicted.next;\n    }\n    const entry: FIFOCacheEntry = {key}\n    if (!this.head) {\n      this.head = entry;\n    }\n    if (!this.tail) {\n      this.tail = entry;\n    } else {\n      this.tail.next = entry;\n      this.tail = entry;\n    }\n    this.data.set(key, value);\n    return this;\n  }\n}\n\nfunction getKey(name: string, id: string): string {\n  return name + id;\n}\n\nconst ModelMap: {[name: string]: string} = {}\nModelMap[Discussion.name] = 'discussions';\n\n\n/** Empty function used to disable callbacks */\nfunction noop() {};\n\nexport abstract class ResponseCache {\n  private static responseErrors: Cache<boolean> = new FIFOCache(128);\n  private static inFlight: Map<string, Promise<Model | null>> = new Map();\n\n  public static async find<T extends Model>(m: new () => T, id: string, options = {}): Promise<T | null> {\n    const key = getKey(m.name, id);\n\n    if (this.responseErrors.get(key) == true) {\n      return null;\n    }\n    const inFlight = this.inFlight.get(key);\n    if (inFlight) {\n      return inFlight as Promise<T | null>;\n    } else {\n      const req = app.store.find<T>(ModelMap[m.name], id, options, {errorHandler: noop})\n        .catch(() => {\n          this.responseErrors.set(key, true);\n          return null;\n        })\n        .finally(() => this.inFlight.delete(key));\n      this.inFlight.set(key, req);\n      return req;\n    }\n  }\n}\n","/*\n * This file is part of club-1/flarum-ext-cross-references.\n *\n * Copyright (c) 2022 Nicolas Peugnet <nicolas@club1.fr>.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n *\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport Component from \"flarum/common/Component\";\nimport {ComponentAttrs} from \"flarum/common/Component\";\n\ntype DiscussionIdAttrs = ComponentAttrs & {discussionId: string}\n\nexport default class DiscussionId extends Component<DiscussionIdAttrs> {\n  view() {\n    return <span class=\"DiscussionId\">#{this.attrs.discussionId}</span>\n  }\n}\n","/*\n * This file is part of club-1/flarum-ext-cross-references.\n *\n * Copyright (c) 2022 Nicolas Peugnet <nicolas@club1.fr>.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n *\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport app from 'flarum/forum/app';\nimport Link from 'flarum/common/components/Link';\nimport Component from 'flarum/common/Component';\nimport type { ComponentAttrs } from 'flarum/common/Component';\nimport DiscussionId from './DiscussionId';\nimport { ResponseCache } from '../cache';\nimport Discussion from 'flarum/common/models/Discussion';\nimport type { Vnode } from 'mithril';\n\nexport interface IDiscussion {\n  id(): string|undefined\n  title(): string\n}\n\ntype DiscussionLinkAttrs = ComponentAttrs & {\n  discussionId: string,\n  href?: string,\n}\n\nexport default class DiscussionLink extends Link {\n  attrs!: DiscussionLinkAttrs;\n  discussion?: IDiscussion;\n\n  oninit(vnode: Vnode) {\n    super.oninit(vnode);\n    const discussionId = this.attrs.discussionId;\n    const discussion = app.store.getById<Discussion>('discussions', discussionId);\n    if (!discussion) {\n      ResponseCache.find(Discussion, discussionId).then((d) => {\n        if (d) {\n          this.discussion = d;\n          m.redraw();\n        }\n      });\n    }\n    if (discussion) {\n      this.discussion = discussion;\n    }\n  }\n\n  view() {\n    const href = this.attrs.href;\n    const showId = app.forum.attribute('showDiscussionId');\n    const isComment = href && /\\/d\\/[^\\/]+\\/[0-9]+/.test(href);\n    if (this.discussion) {\n      return <Link\n        href={href ? href : app.route('discussion', {id: this.attrs.discussionId})}\n        class=\"DiscussionLink\"\n      >\n        {\n          this.discussion?.title()\n        } {\n          showId && <DiscussionId discussionId={this.attrs.discussionId} />\n        } {\n          isComment && <DiscussionComment/>\n        }\n      </Link>\n    } else {\n      return <span\n        class=\"DiscussionLink DiscussionUnknown\"\n      >\n        {\n          app.translator.trans('club-1-cross-references.forum.unknown_discussion')\n        } {\n          showId && <DiscussionId discussionId={this.attrs.discussionId} />\n        } {\n          isComment && <DiscussionComment/>\n        }\n      </span>\n    }\n  }\n}\n\nclass DiscussionComment extends Component {\n  view() {\n    return <span class=\"DiscussionComment\">\n      ({app.translator.trans('club-1-cross-references.forum.comment')})\n    </span>\n  }\n}\n","/*\n * This file is part of club-1/flarum-ext-cross-references.\n *\n * Copyright (c) 2022 Nicolas Peugnet <nicolas@club1.fr>.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n *\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport EventPost from 'flarum/forum/components/EventPost';\nimport { IPostAttrs } from 'flarum/forum/components/Post';\nimport DiscussionLink from './DiscussionLink';\n\ntype DiscussionReferencedPostAttrs = IPostAttrs & {sourceIds: string[]};\n\nexport default class DiscussionReferencedPost extends EventPost {\n  attrs!: DiscussionReferencedPostAttrs\n\n  static initAttrs(attrs: DiscussionReferencedPostAttrs) {\n    super.initAttrs(attrs);\n\n    attrs.sourceIds = attrs.post.content() as unknown as string[];\n  }\n  icon() {\n    return 'fas fa-reply';\n  }\n\n  descriptionKey() {\n    return this.attrs.sourceIds.length == 1 ?\n      'club-1-cross-references.forum.post_stream.discussion_referenced_text' :\n      'club-1-cross-references.forum.post_stream.discussion_referenced_multiple_text';\n  }\n\n  descriptionData() {\n    if (this.attrs.sourceIds.length == 1) {\n      return {\n        source: <DiscussionLink discussionId={this.attrs.sourceIds[0]} />\n      }\n    } else {\n      return {\n        sources: <ul>\n          {this.attrs.sourceIds.map((id) =>\n            <li><DiscussionLink discussionId={id} /></li>\n          )}\n        </ul>\n      }\n    }\n  }\n}\n","/*\n * This file is part of club-1/flarum-ext-cross-references.\n *\n * Copyright (c) 2022 Nicolas Peugnet <nicolas@club1.fr>.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n *\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { ComponentAttrs } from 'flarum/common/Component';\nimport { extend } from 'flarum/common/extend';\nimport Discussion from 'flarum/common/models/Discussion';\nimport app from 'flarum/forum/app';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport DiscussionHero from 'flarum/forum/components/DiscussionHero';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport { ResponseCache } from './cache';\nimport DiscussionId from './components/DiscussionId';\nimport DiscussionLink from './components/DiscussionLink';\nimport DiscussionReferencedPost from './components/DiscussionReferencedPost';\n\napp.initializers.add('club-1-cross-references', function(app) {\n  app.postComponents.discussionReferenced = DiscussionReferencedPost;\n  addSourceLinkReplacement();\n\n  addDiscussionTitleId();\n  addDiscussionListId();\n});\n\n/**\n * Extend CommentPost to replace plain links to discussions into\n * formated ones using its title as the text.\n */\nfunction addSourceLinkReplacement() {\n  function replaceSourceLinks(this: CommentPost) {\n    this.$('.Post-body a').map(function() {\n      const a = this as HTMLAnchorElement;\n      if (a.protocol !== document.location.protocol || a.host !== document.location.host) {\n        return;\n      }\n      const match = a.pathname.match(/\\/d\\/([0-9]+)/);\n      if (match == null) {\n        return;\n      }\n      if (\n        app.forum.attribute('retrofitLinksInFrontend')\n        && a.text === a.href\n        && !a.classList.contains('DiscussionLink')\n      ) {\n        const discussionId = match[1];\n        const span = document.createElement('span');\n        m.mount(span, {view: () => m(DiscussionLink, {discussionId, href: a.href})});\n        a.replaceWith(span)\n      } else {\n        a.addEventListener('click', (e) => {\n          m.route.set(this.getAttribute('href'))\n          e.preventDefault();\n        });\n      }\n    });\n  }\n  extend(CommentPost.prototype, 'oncreate', replaceSourceLinks);\n  extend(CommentPost.prototype, 'onupdate', replaceSourceLinks);\n}\n\n/**\n * Extend DiscussionHero to add its ID in the title item.\n */\nfunction addDiscussionTitleId() {\n  extend(DiscussionHero.prototype, 'items', function(items) {\n    if (!app.forum.attribute('showDiscussionId')) {\n      return;\n    }\n    const attrs = this.attrs as ComponentAttrs & {discussion: Discussion}\n    const discussionId = attrs.discussion.id()\n    const title = items.get('title');\n    items.setContent('title', m('h2', [\n      title.text,\n      ' ',\n      m(DiscussionId, {discussionId}),\n    ]));\n  });\n}\n\n/**\n * Extend DiscussionListItem to add its ID as an item with a high priority.\n */\nfunction addDiscussionListId() {\n  extend(DiscussionListItem.prototype, 'infoItems', function(items) {\n    if (!app.forum.attribute('showDiscussionId')) {\n      return;\n    }\n    const attrs = this.attrs as ComponentAttrs & {discussion: Discussion}\n    const discussionId = attrs.discussion.id();\n    items.add('id', m(DiscussionId, {discussionId}), 90);\n  });\n}\n\n/**\n * Extremely dirty hack to trigger a refresh of the composer preview\n * by inserting a ZeroWidthSpace at the beginning of the message and\n * then removing it 50ms later after the render pass.\n *\n * TODO: Replace this workaround once this issue is fixed:\n * <https://github.com/flarum/framework/issues/3720>\n */\nfunction refreshComposerPreview() {\n  const content = app.composer.fields?.content;\n  if (content) {\n    content('â€‹' + content());\n    setTimeout(() => content(content().slice(1)), 50);\n  }\n}\n\nexport function filterCrossReferences(tag: any): false | void {\n  const id = tag.getAttribute('id');\n  const res = app.store.getById('discussions', id);\n  if (res) {\n    const discussion = res as Discussion;\n    tag.setAttribute('title', discussion.title());\n  } else {\n    ResponseCache.find(Discussion, id).then((d) => {\n      if (d) refreshComposerPreview();\n    });\n    return false;\n  }\n  tag.setAttribute('comment', app.translator.trans('club-1-cross-references.forum.comment'));\n}\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/models/Discussion'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/CommentPost'];","module.exports = flarum.core.compat['forum/components/DiscussionHero'];","module.exports = flarum.core.compat['forum/components/DiscussionListItem'];","module.exports = flarum.core.compat['forum/components/EventPost'];","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) {\n              if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            }\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["Discussion","app","FIFOCache","capacity","head","tail","data","Map","get","key","set","value","size","evicted","next","entry","getKey","name","id","ModelMap","noop","ResponseCache","find","m","options","responseErrors","inFlight","req","store","errorHandler","Component","DiscussionId","view","attrs","discussionId","Link","DiscussionLink","discussion","oninit","vnode","getById","then","d","redraw","href","showId","forum","attribute","isComment","test","route","title","translator","trans","DiscussionComment","EventPost","DiscussionReferencedPost","initAttrs","sourceIds","post","content","icon","descriptionKey","length","descriptionData","source","sources","map","extend","CommentPost","DiscussionHero","DiscussionListItem","initializers","add","postComponents","discussionReferenced","addSourceLinkReplacement","addDiscussionTitleId","addDiscussionListId","replaceSourceLinks","$","a","protocol","document","location","host","match","pathname","text","classList","contains","span","createElement","mount","replaceWith","addEventListener","e","getAttribute","preventDefault","prototype","items","setContent","refreshComposerPreview","composer","fields","setTimeout","slice","filterCrossReferences","tag","res","setAttribute","_typeof","require","_regeneratorRuntime","module","exports","__esModule","Op","Object","hasOwn","hasOwnProperty","defineProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","TypeError","info","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","_catch","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","_inheritsLoose","subClass","superClass","_setPrototypeOf","o","p","bind"],"sourceRoot":""}